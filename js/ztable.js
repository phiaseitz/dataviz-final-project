var ZTABLE = {
  "-0.00": 0.5,
  "-0.01": 0.4681,
  "-0.02": 0.4721,
  "-0.03": 0.4761,
  "-0.04": 0.4801,
  "-0.05": 0.484,
  "-0.06": 0.488,
  "-0.07": 0.492,
  "-0.08": 0.496,
  "-0.09": 0.5,
  "-0.10": 0.4247,
  "-0.11": 0.4286,
  "-0.12": 0.4325,
  "-0.13": 0.4364,
  "-0.14": 0.4404,
  "-0.15": 0.4443,
  "-0.16": 0.4483,
  "-0.17": 0.4522,
  "-0.18": 0.4562,
  "-0.19": 0.4602,
  "-0.20": 0.3829,
  "-0.21": 0.3897,
  "-0.22": 0.3936,
  "-0.23": 0.3974,
  "-0.24": 0.4013,
  "-0.25": 0.4052,
  "-0.26": 0.409,
  "-0.27": 0.4129,
  "-0.28": 0.4168,
  "-0.29": 0.4207,
  "-0.30": 0.3483,
  "-0.31": 0.352,
  "-0.32": 0.3557,
  "-0.33": 0.3594,
  "-0.34": 0.3632,
  "-0.35": 0.3669,
  "-0.36": 0.3707,
  "-0.37": 0.3745,
  "-0.38": 0.3783,
  "-0.39": 0.3821,
  "-0.40": 0.3121,
  "-0.41": 0.3156,
  "-0.42": 0.3192,
  "-0.43": 0.3228,
  "-0.44": 0.3264,
  "-0.45": 0.33,
  "-0.46": 0.3336,
  "-0.47": 0.3372,
  "-0.48": 0.3409,
  "-0.49": 0.3446,
  "-0.50": 0.2776,
  "-0.51": 0.281,
  "-0.52": 0.2843,
  "-0.53": 0.2877,
  "-0.54": 0.2912,
  "-0.55": 0.2946,
  "-0.56": 0.2981,
  "-0.57": 0.3015,
  "-0.58": 0.305,
  "-0.59": 0.3085,
  "-0.60": 0.2451,
  "-0.61": 0.2483,
  "-0.62": 0.2514,
  "-0.63": 0.2546,
  "-0.64": 0.2578,
  "-0.65": 0.2611,
  "-0.66": 0.2643,
  "-0.67": 0.2676,
  "-0.68": 0.2709,
  "-0.69": 0.2743,
  "-0.70": 0.2148,
  "-0.71": 0.2177,
  "-0.72": 0.2206,
  "-0.73": 0.2236,
  "-0.74": 0.2266,
  "-0.75": 0.2296,
  "-0.76": 0.2327,
  "-0.77": 0.2358,
  "-0.78": 0.2389,
  "-0.79": 0.242,
  "-0.80": 0.1867,
  "-0.81": 0.1894,
  "-0.82": 0.1922,
  "-0.83": 0.1949,
  "-0.84": 0.1977,
  "-0.85": 0.2005,
  "-0.86": 0.2033,
  "-0.87": 0.2061,
  "-0.88": 0.209,
  "-0.89": 0.2119,
  "-0.90": 0.1611,
  "-0.91": 0.1635,
  "-0.92": 0.166,
  "-0.93": 0.1685,
  "-0.94": 0.1711,
  "-0.95": 0.1736,
  "-0.96": 0.1762,
  "-0.97": 0.1788,
  "-0.98": 0.1814,
  "-0.99": 0.1841,
  "-1.00": 0.1379,
  "-1.01": 0.1401,
  "-1.02": 0.1423,
  "-1.03": 0.1446,
  "-1.04": 0.1469,
  "-1.05": 0.1492,
  "-1.06": 0.1515,
  "-1.07": 0.1539,
  "-1.08": 0.1562,
  "-1.09": 0.1587,
  "-1.10": 0.117,
  "-1.11": 0.119,
  "-1.12": 0.121,
  "-1.13": 0.123,
  "-1.14": 0.1251,
  "-1.15": 0.1271,
  "-1.16": 0.1292,
  "-1.17": 0.1314,
  "-1.18": 0.1335,
  "-1.19": 0.1357,
  "-1.20": 0.0985,
  "-1.21": 0.1003,
  "-1.22": 0.102,
  "-1.23": 0.1038,
  "-1.24": 0.1056,
  "-1.25": 0.1075,
  "-1.26": 0.1093,
  "-1.27": 0.1112,
  "-1.28": 0.1131,
  "-1.29": 0.1151,
  "-1.30": 0.0823,
  "-1.31": 0.0838,
  "-1.32": 0.0853,
  "-1.33": 0.0869,
  "-1.34": 0.0885,
  "-1.35": 0.0901,
  "-1.36": 0.0918,
  "-1.37": 0.0934,
  "-1.38": 0.0951,
  "-1.39": 0.0968,
  "-1.40": 0.0681,
  "-1.41": 0.0694,
  "-1.42": 0.0708,
  "-1.43": 0.0721,
  "-1.44": 0.0735,
  "-1.45": 0.0749,
  "-1.46": 0.0764,
  "-1.47": 0.0778,
  "-1.48": 0.0793,
  "-1.49": 0.0808,
  "-1.50": 0.0559,
  "-1.51": 0.0571,
  "-1.52": 0.0582,
  "-1.53": 0.0594,
  "-1.54": 0.0606,
  "-1.55": 0.0618,
  "-1.56": 0.063,
  "-1.57": 0.0643,
  "-1.58": 0.0655,
  "-1.59": 0.0668,
  "-1.60": 0.0455,
  "-1.61": 0.0465,
  "-1.62": 0.0475,
  "-1.63": 0.0485,
  "-1.64": 0.0495,
  "-1.65": 0.0505,
  "-1.66": 0.0516,
  "-1.67": 0.0526,
  "-1.68": 0.0537,
  "-1.69": 0.0548,
  "-1.70": 0.0367,
  "-1.71": 0.0375,
  "-1.72": 0.0384,
  "-1.73": 0.0392,
  "-1.74": 0.0401,
  "-1.75": 0.0409,
  "-1.76": 0.0418,
  "-1.77": 0.0427,
  "-1.78": 0.0436,
  "-1.79": 0.0446,
  "-1.80": 0.0294,
  "-1.81": 0.0301,
  "-1.82": 0.0307,
  "-1.83": 0.0314,
  "-1.84": 0.0322,
  "-1.85": 0.0329,
  "-1.86": 0.0336,
  "-1.87": 0.0344,
  "-1.88": 0.0351,
  "-1.89": 0.0359,
  "-1.90": 0.0233,
  "-1.91": 0.0239,
  "-1.92": 0.0244,
  "-1.93": 0.025,
  "-1.94": 0.0256,
  "-1.95": 0.0262,
  "-1.96": 0.0268,
  "-1.97": 0.0274,
  "-1.98": 0.0281,
  "-1.99": 0.0287,
  "-2.00": 0.0183,
  "-2.01": 0.0188,
  "-2.02": 0.0192,
  "-2.03": 0.0197,
  "-2.04": 0.0202,
  "-2.05": 0.0207,
  "-2.06": 0.0212,
  "-2.07": 0.0217,
  "-2.08": 0.0222,
  "-2.09": 0.0228,
  "-2.10": 0.0143,
  "-2.11": 0.0146,
  "-2.12": 0.015,
  "-2.13": 0.0154,
  "-2.14": 0.0158,
  "-2.15": 0.0162,
  "-2.16": 0.0166,
  "-2.17": 0.017,
  "-2.18": 0.0174,
  "-2.19": 0.0179,
  "-2.20": 0.011,
  "-2.21": 0.0113,
  "-2.22": 0.0116,
  "-2.23": 0.0119,
  "-2.24": 0.0122,
  "-2.25": 0.0125,
  "-2.26": 0.0129,
  "-2.27": 0.0132,
  "-2.28": 0.0136,
  "-2.29": 0.0139,
  "-2.30": 0.0084,
  "-2.31": 0.0087,
  "-2.32": 0.0089,
  "-2.33": 0.0091,
  "-2.34": 0.0094,
  "-2.35": 0.0096,
  "-2.36": 0.0099,
  "-2.37": 0.0102,
  "-2.38": 0.0104,
  "-2.39": 0.0107,
  "-2.40": 0.0064,
  "-2.41": 0.0066,
  "-2.42": 0.0068,
  "-2.43": 0.0069,
  "-2.44": 0.0071,
  "-2.45": 0.0073,
  "-2.46": 0.0075,
  "-2.47": 0.0078,
  "-2.48": 0.008,
  "-2.49": 0.0082,
  "-2.50": 0.0048,
  "-2.51": 0.0049,
  "-2.52": 0.0051,
  "-2.53": 0.0052,
  "-2.54": 0.0054,
  "-2.55": 0.0055,
  "-2.56": 0.0057,
  "-2.57": 0.0059,
  "-2.58": 0.006,
  "-2.59": 0.0062,
  "-2.60": 0.0036,
  "-2.61": 0.0037,
  "-2.62": 0.0038,
  "-2.63": 0.0039,
  "-2.64": 0.004,
  "-2.65": 0.0041,
  "-2.66": 0.0043,
  "-2.67": 0.0044,
  "-2.68": 0.0045,
  "-2.69": 0.0047,
  "-2.70": 0.0026,
  "-2.71": 0.0027,
  "-2.72": 0.0028,
  "-2.73": 0.0029,
  "-2.74": 0.003,
  "-2.75": 0.0031,
  "-2.76": 0.0032,
  "-2.77": 0.0033,
  "-2.78": 0.0034,
  "-2.79": 0.0035,
  "-2.80": 0.0019,
  "-2.81": 0.002,
  "-2.82": 0.0021,
  "-2.83": 0.0021,
  "-2.84": 0.0022,
  "-2.85": 0.0023,
  "-2.86": 0.0023,
  "-2.87": 0.0024,
  "-2.88": 0.0025,
  "-2.89": 0.0026,
  "-2.90": 0.0014,
  "-2.91": 0.0014,
  "-2.92": 0.0015,
  "-2.93": 0.0015,
  "-2.94": 0.0016,
  "-2.95": 0.0016,
  "-2.96": 0.0017,
  "-2.97": 0.0018,
  "-2.98": 0.0018,
  "-2.99": 0.0019,
  "-3.00": 0.001,
  "-3.01": 0.001,
  "-3.02": 0.0011,
  "-3.03": 0.0011,
  "-3.04": 0.0011,
  "-3.05": 0.0012,
  "-3.06": 0.0012,
  "-3.07": 0.0013,
  "-3.08": 0.0013,
  "-3.09": 0.0013,
  "-3.10": 0.0007,
  "-3.11": 0.0007,
  "-3.12": 0.0008,
  "-3.13": 0.0008,
  "-3.14": 0.0008,
  "-3.15": 0.0008,
  "-3.16": 0.0009,
  "-3.17": 0.0009,
  "-3.18": 0.0009,
  "-3.19": 0.001,
  "-3.20": 0.0005,
  "-3.21": 0.0005,
  "-3.22": 0.0005,
  "-3.23": 0.0006,
  "-3.24": 0.0006,
  "-3.25": 0.0006,
  "-3.26": 0.0006,
  "-3.27": 0.0006,
  "-3.28": 0.0007,
  "-3.29": 0.0007,
  "-3.30": 0.0003,
  "-3.31": 0.0004,
  "-3.32": 0.0004,
  "-3.33": 0.0004,
  "-3.34": 0.0004,
  "-3.35": 0.0004,
  "-3.36": 0.0004,
  "-3.37": 0.0005,
  "-3.38": 0.0005,
  "-3.39": 0.0005,
  "-3.40": 0.0002,
  "-3.41": 0.0003,
  "-3.42": 0.0003,
  "-3.43": 0.0003,
  "-3.44": 0.0003,
  "-3.45": 0.0003,
  "-3.46": 0.0003,
  "-3.47": 0.0003,
  "-3.48": 0.0003,
  "-3.49": 0.0003,
  "0.00": 0.5000
};

/**
node-ztable
-----------

This code, originally packaged for node, is taken from
https://github.com/arjanfrans/node-ztable and is used to move from a statistical
z-score to a percentile.

Fun-Fact: The code was originally bugged. But thanks to the miracle of
open-source, it has been fixed here and a PR has been submitted to the repo
from whence it came.

*/

/**
 * A helper function that, given a z-score (std deviations from the mean)
 * returns the percentile to which that z-score maps.
 *
 * @param  {Number} zscore A z-score, the number of std. deviations from a mean
 * @return {Number}        A percentile, as a 0-1 value
 */
var ztable = function (zscore) {
  // Clean arguments
  if (isNaN(zscore)) {
    console.warn("ERROR: zscore", zscore, "is not a number!" )
    return undefined
  }

  // Handle edge cases
  if (zscore === 0) return 0.5000;
  else if (zscore > 3.49) return 1;
  else if (zscore < -3.49) return 0;

  var percentile;

  if (zscore > 0) percentile = 1-ZTABLE[(-zscore).toFixed(2)];
  else percentile = ZTABLE[zscore.toFixed(2)];

  return percentile;
}
